{% extends "base.html" %}
{% load static %}


{% block content %}
<section class="hero_section">
      <div class="container">
          <div class="hero_text_main">
              <h5>Instant quote <img src="{% static 'assets/imgs/stars.svg' %}" alt=""></h5>
              <h2>Get an Instant Quote for Your 3D Print</h2>
              <p>Upload your model, select materials and options, get instant pricing with detailed breakdown</p>
          </div>
      </div>
  </section>

<form hx-post="{% url 'Quote:service' %}" hx-swap="none"  enctype="multipart/form-data">
<div class="container mt-5">
      {% csrf_token %}
      <div class="form-container">
            <div>
                  <h1>Tell Us About Your Project</h1>
                  <p>Fill out the form below with as much detail as possible. Don't worry if you don't have all the technical specifications—we'll help you figure it out!</p>
            </div>
            <div class="field-container">
                  <h3>
                        <img src="{% static 'assets/imgs/user.svg' %}" alt="icon" style="width: 18px; margin-right: 8px;">
                        personal information</h3>
                  <div>
                        <div class="row">
                              <div class="col-md-6 mb-3">
                                    <label for="first">First Name</label>
                                    <input type="text" id="first" name="first_name" required placeholder="Enter your first name">
                              </div>
                              <div class="col-md-6 mb-3">
                                    <label for="last">Last Name</label>
                                    <input type="text" id="last" name="last_name" required placeholder="Enter your last name">
                              </div>
                              <div class="col-md-6 mb-3">
                                    <label for="email">Email Address</label>
                                    <input type="email" id="email" name="email" required placeholder="your.email@example.com">
                              </div>
                              <div class="col-md-6 mb-3">
                                    <label for="phone">Phone Number <small class="text-muted">(Optional)</small></label>
                                    <input type="tel" id="phone" name="phone_number"  placeholder="+923001234567" pattern="^\+?[0-9\s\-]{10,15}$"
                                    oninvalid="this.setCustomValidity('Please enter a valid phone number')"
                                    oninput="this.setCustomValidity('')" placeholder="+1 (555) 123-4567">
                                    <small class="form-text text-muted">For faster communication</small>
                              </div>
                        </div>
                  </div>
            </div>

            <div class="field-container">
                  <h3>Project Details</h3>
                  <div>
                        <div class="row">
                              <div class="col-md-12 mb-3">
                                    <label for="first">Project Title*</label>
                                    <input type="text" name="project_title" required id="first" placeholder="Give your project a name (e.g., 'Custom Phone Case', 'Prototype Housing')">
                                    <small class="form-text text-muted">Helps us organize your request</small>
                              </div>
                              <div class="col-md-12 mb-3">
                                   <label for="textarea">Message *</label> 
                                    <br>
                                    <textarea name="message_textcrea"  required id="textarea" rows="8"></textarea>
                                    <small class="form-text text-muted">The more details you provide, the more accurate our quote will be</small>
                              </div>
                        </div>
                  </div>
            </div>
            <div class="btn-container w-auto text-center m-auto mt-3"><button class="submit-button">Request a Quote</button></div>
      </div>
</div>
</div>
</form>

{% endblock content %}

{% block js %}
<script>
document.body.addEventListener('htmx:afterRequest', function(event) {
    const status = event.detail.xhr.status;
    const form = event.detail.elt.closest('form');

    if (status === 200) {
        Toastify({
            text: "✅ Thank you for reaching out! We'll get back to you shortly.",
            duration: 5000,
            gravity: "top",
            position: "center",
            backgroundColor: "#4CAF50",
        }).showToast();

        if (form) form.reset();
    } else {
        Toastify({
            text: event.detail.xhr.responseText || "❌ Oops! Something went wrong. Please check your input.",
            duration: 5000,
            gravity: "top",
            position: "center",
            backgroundColor: "#FF4D4F",
        }).showToast();
    }
});
  
  </script>
{% endblock js %}